{"version":3,"sources":["background.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA,4BAAA;;AAAA,EAAA,CAAA,GAAI,MAAM,CAAC,aAAX,CAAA;;AAAA,EACA,CAAA,GAAI,MAAM,CAAC,IADX,CAAA;;AAAA,EAEA,CAAA,GAAI,MAAM,CAAC,OAFX,CAAA;;AAAA,EAIA,QAAA,GAAW,SAAC,KAAD,EAAQ,QAAR,GAAA;AACT,IAAA,CAAC,CAAC,QAAF,CAAW;AAAA,MAAC,KAAA,EAAO,KAAR;KAAX,CAAA,CAAA;WACA,CAAC,CAAC,OAAF,CAAU;AAAA,MAAC,IAAA,EAAM,QAAP;KAAV,EAFS;EAAA,CAJX,CAAA;;AAAA,EAOA,SAAA,GAAY,SAAC,EAAD,GAAA;AACV,IAAA,CAAC,CAAC,WAAF,CAAc,EAAd,EAAkB;AAAA,MAAC,IAAA,EAAO,aAAR;KAAlB,EAAyC,SAAA,GAAA,CAAzC,CAAA,CAAA;WACA,CAAC,CAAC,SAAS,CAAC,WAAZ,CAAwB,SAAC,GAAD,GAAA;AACtB,MAAA,IAAG,GAAG,CAAC,GAAP;eAAgB,QAAA,CAAU,iBAAV,EAA6B,sBAA7B,EAAhB;OAAA,MAAA;eACK,QAAA,CAAU,eAAV,EAA2B,kBAA3B,EADL;OADsB;IAAA,CAAxB,EAFU;EAAA,CAPZ,CAAA;;AAAA,EAaA,CAAC,CAAC,SAAS,CAAC,WAAZ,CAAwB,SAAxB,CAbA,CAAA;;AAAA,EAcA,CAAC,CAAC,kBAAkB,CAAC,WAArB,CAAiC,SAAjC,CAdA,CAAA;;AAAA,EAgBA,CAAC,CAAC,SAAS,CAAC,WAAZ,CAAwB,SAAC,GAAD,GAAA;WACtB,CAAC,CAAC,QAAF,CAAW,EAAX,EAAe,SAAC,KAAD,GAAA;AACb,MAAA,IAAG,KAAA,KAAU,iBAAb;AACE,QAAA,CAAC,CAAC,WAAF,CAAc,GAAG,CAAC,EAAlB,EAAsB;AAAA,UAAC,IAAA,EAAO,iBAAR;SAAtB,EAAiD,SAAA,GAAA,CAAjD,CAAA,CAAA;eACA,QAAA,CAAU,eAAV,EAA2B,kBAA3B,EAFF;OAAA,MAGK,IAAG,KAAA,KAAU,eAAb;AACH,QAAA,CAAC,CAAC,WAAF,CAAc,GAAG,CAAC,EAAlB,EAAsB;AAAA,UAAC,IAAA,EAAO,eAAR;SAAtB,EAA+C,SAAA,GAAA,CAA/C,CAAA,CAAA;eACA,QAAA,CAAU,iBAAV,EAA6B,sBAA7B,EAFG;OAJQ;IAAA,CAAf,EADsB;EAAA,CAAxB,CAhBA,CAAA;AAAA","file":"background.js","sourceRoot":"/source/","sourcesContent":["b = chrome.browserAction\nt = chrome.tabs\nr = chrome.runtime\n\nupdateBa = (title, iconPath) ->\n  b.setTitle {title: title}\n  b.setIcon {path: iconPath}\nconfirmBa = (id) ->\n  t.sendMessage id, {emit: 'ikasumi:has'}, ->\n  r.onMessage.addListener (req) ->\n    if req.has then updateBa 'Unapply Ikasumi', 'icon/icon_38_act.png'\n    else updateBa 'Apply Ikasumi', 'icon/icon_38.png'\n\nt.onUpdated.addListener confirmBa\nt.onSelectionChanged.addListener confirmBa\n\nb.onClicked.addListener (tab) ->\n  b.getTitle {}, (title) ->\n    if title is 'Unapply Ikasumi'\n      t.sendMessage tab.id, {emit: 'ikasumi:unapply'}, ->\n      updateBa 'Apply Ikasumi', 'icon/icon_38.png'\n    else if title is 'Apply Ikasumi'\n      t.sendMessage tab.id, {emit: 'ikasumi:apply'}, ->\n      updateBa 'Unapply Ikasumi', 'icon/icon_38_act.png'\n"]}